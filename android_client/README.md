# Android-клиент для системы мониторинга запретных зон

Android-приложение для получения уведомлений о нарушениях в запретных зонах в режиме реального времени.

## Возможности

- Регистрация устройства на сервере
- Получение уведомлений о нарушениях через WebSocket
- Просмотр деталей нарушения с изображением
- Подтверждение или отклонение нарушения (ложное срабатывание)
- Просмотр истории нарушений
- Просмотр статуса сервера и мониторинга

## Технологии

- **Kotlin** - язык программирования
- **MVVM** - архитектура приложения
- **Hilt** - Dependency Injection
- **Retrofit** - HTTP-клиент
- **OkHttp WebSocket** - WebSocket клиент
- **Room** - локальная база данных
- **Coroutines + Flow** - асинхронное программирование
- **Glide** - загрузка изображений
- **Material Design** - UI компоненты

## Требования

- Android 7.0 (API 24) или выше
- Подключение к локальной сети (WiFi/LAN)

## Установка

1. Откройте проект в Android Studio
2. Синхронизируйте Gradle файлы
3. Соберите и установите приложение на устройство

## Настройка

1. Запустите приложение
2. Перейдите в настройки
3. Введите IP-адрес сервера (например, `192.168.1.100`)
4. Введите порт сервера (по умолчанию `8000`)
5. Нажмите "Подключиться"

## Использование

### Главный экран

- Отображает статус мониторинга
- Показывает количество неподтвержденных нарушений
- Список последних нарушений

### Экран деталей нарушения

- Полное изображение нарушения
- Информация о зоне, времени, уверенности детекции
- Кнопки "Подтвердить" и "Ложное срабатывание"

### История нарушений

- Полный список всех нарушений
- Фильтрация по статусу
- Поиск по названию зоны

### Настройки

- Настройка подключения к серверу
- Информация о зарегистрированном устройстве
- Автоматическое подключение при запуске

## Структура проекта

```
app/
├── data/
│   ├── api/              # API интерфейсы (Retrofit)
│   ├── websocket/        # WebSocket клиент
│   ├── repository/       # Репозитории для работы с данными
│   └── local/            # Room база данных
├── domain/
│   └── model/            # Модели данных
├── presentation/
│   ├── ui/               # UI компоненты (Activities)
│   ├── viewmodel/        # ViewModels
│   └── adapter/          # RecyclerView адаптеры
└── utils/                # Утилиты
```

## API Endpoints

Приложение использует следующие API endpoints:

- `POST /api/register` - регистрация клиента
- `POST /api/unregister/{client_id}` - отмена регистрации
- `GET /api/status` - статус сервера
- `GET /api/violations` - список нарушений
- `GET /api/violations/{violation_id}` - нарушение по ID
- `GET /api/violations/{violation_id}/image` - изображение нарушения
- `POST /api/notifications/response` - отправка ответа (HTTP fallback)
- `WS /api/notifications/ws/{client_id}` - WebSocket для уведомлений

## Уведомления

При получении нового нарушения приложение показывает системное уведомление Android с:
- Названием зоны
- Временем нарушения
- Возможностью открыть детали нарушения

## Локальное хранилище

Приложение использует Room Database для кэширования:
- Нарушений
- Информации о клиенте
- Неотправленных ответов

## Лицензия

Проект разработан для системы мониторинга запретных зон.

